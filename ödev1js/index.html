<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>KarÅŸÄ±lama EkranÄ±</title>
  </head>
  <body>
    <main class="card">
      <h1 class="title">HoÅŸ geldin ğŸ‘‹</h1>
      <p class="subtitle">
        Ä°smini yaz, seni isminle karÅŸÄ±layalÄ±m ve anlÄ±k saatâ€“gÃ¼n bilgisini
        gÃ¶sterelim.
      </p>

      <!-- GiriÅŸ alanÄ± -->
      <div class="row" id="inputRow">
        <input
          id="nameInput"
          type="text"
          placeholder="Ä°smin nedir?"
          aria-label="Ä°sim"
        />
        <button id="startBtn">BaÅŸlat</button>
      </div>

      <div class="divider"></div>

      <!-- KarÅŸÄ±lama ve saat/gÃ¼n -->
      <div id="welcome" class="hidden">
        <div class="greeting" id="greetingText"></div>
        <div class="clock" id="clockText"></div>
      </div>
    </main>

    <script>
      // Elemanlar
      const nameInput = document.getElementById("nameInput");
      const startBtn = document.getElementById("startBtn");
      const inputRow = document.getElementById("inputRow");
      const welcome = document.getElementById("welcome");
      const greetingText = document.getElementById("greetingText");
      const clockText = document.getElementById("clockText");
      const timeFormatter = new Intl.DateTimeFormat("tr-TR", {
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit",
      });
      const dayFormatter = new Intl.DateTimeFormat("tr-TR", {
        weekday: "long",
        year: "numeric",
        month: "long",
        day: "numeric",
      });

      let timerId = null;

      function updateClock() {
        const now = new Date();
        const time = timeFormatter.format(now);
        const day = dayFormatter.format(now);
        clockText.textContent = `Åu an: ${time} â€¢ ${day}`;
      }

      function startGreeting() {
        const rawName = nameInput.value.trim();
        const name = rawName || "Misafir";

        // KarÅŸÄ±lama metni
        greetingText.textContent = `Merhaba, ${name}!`;
        inputRow.classList.add("hidden");
        welcome.classList.remove("hidden");

        // Saat/gÃ¼n anÄ±nda ve her saniye gÃ¼ncellensin
        updateClock();
        clearInterval(timerId);
        timerId = setInterval(updateClock, 1000);
        try {
          localStorage.setItem("welcomeName", name);
        } catch {}
      }

      // Buton tÄ±klama
      startBtn.addEventListener("click", startGreeting);

      // Enter ile baÅŸlat
      nameInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") startGreeting();
      });

      // Sayfa aÃ§Ä±ldÄ±ÄŸÄ±nda daha Ã¶nce kaydedilmiÅŸ isim varsa otomatik karÅŸÄ±lama
      window.addEventListener("DOMContentLoaded", () => {
        try {
          const saved = localStorage.getItem("welcomeName");
          if (saved) {
            nameInput.value = saved;
            startGreeting();
          }
        } catch {}
      });
    </script>
  </body>
</html>
